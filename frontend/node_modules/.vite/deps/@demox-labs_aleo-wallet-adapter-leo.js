import {
  require_dist
} from "./chunk-PU2N7MMA.js";
import {
  __toESM
} from "./chunk-5WRI5ZAA.js";

// node_modules/@demox-labs/aleo-wallet-adapter-leo/dist/adapter.js
var import_aleo_wallet_adapter_base = __toESM(require_dist());
var LeoWalletName = "Leo Wallet";
var LeoWalletAdapter = class extends import_aleo_wallet_adapter_base.BaseMessageSignerWalletAdapter {
  name = LeoWalletName;
  icon = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAIAAABMXPacAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDkuMC1jMDAwIDc5LjE3MWMyN2ZhYiwgMjAyMi8wOC8xNi0yMjozNTo0MSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjAgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjJERjI1N0M3NUFERjExRUQ4OTkyRDkwNjQwODFGMjUwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjJERjI1N0M4NUFERjExRUQ4OTkyRDkwNjQwODFGMjUwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MkRGMjU3QzU1QURGMTFFRDg5OTJEOTA2NDA4MUYyNTAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MkRGMjU3QzY1QURGMTFFRDg5OTJEOTA2NDA4MUYyNTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7ZyM59AAACz0lEQVR42uzdT2vTYADH8d+Tpo3oYeph4g4iE6boZV68idKDiHj1spt7BYL4DgTfgKDgTdxZr4JXD4LCRMGLghtUGPgHpbWmaRuTsWOTOpfkyZ5+v+xWlrT5dE+ewJPFrLRjkb08DgEAABAAABAAAFD1+TmvxbFGQ5VxmdBoyMumT3Y6dujixPdlzO4BkqPvNzV/PO+X/7vuL/W6k7ec7PfovILAHYAf3zQIMw9jJsBwqGMLuvcoBSy8tYd6tqaDhya8FA20ekvLF9wBuHtb798oOLD7IShBawV5Y8VehqCcms30j8+d06y3h5PweFzKe4pjCzu1Vf6HZRbENBQAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAAgAAmgGArGWUTubX7Q01fD1/qvVXU1b0FVs00KkzungFgO11uy9faDSqdKf9ntrXAbA3BBljbdzjJMxJGAACAAACYDar4zQ0uSwq4zYx46nVAmBaw0g3VrV4uvgtb3X05MHOrB+AzJLv/tllnTtf/Ja/bO4AcA6Y0iAsZbPhH07CBAAABAAABAAABAAABAAAABAAABAAABAAABAAABAAABAAABAAAFippMdnNFt1BKjd2lBj0kWcc4cLfnqTkTobAPzb9/Tx/RJ1AZheebdoA7BfDxOzIAAIAAAIAOeyMwuKIvV/y6t2tmO8Ov4rKDsAi0u6dLXSw5FY97r68BaA7S5fS38qrrOhOzdrd50xQ+eAku5+BYBZEAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAEAAAGwrwBculuonp/Fy3/HjYZD37Xcz2I8O/BmpT35nsQ4VhDo5JI7fwRhX58/Tn5pPNbcES2cKGW/m5/ShdleBrCf4xaGevfaoSEo+zFWydH5+V1ft0rZb7OVefSVvzzd4kNerQxQgY3xllkQ01AACAAACAAAyEJ/BRgAJph5IP1XFpwAAAAASUVORK5CYII=";
  url;
  supportedTransactionVersions = null;
  _connecting;
  _wallet;
  _publicKey;
  _decryptPermission;
  _readyState = typeof window === "undefined" || typeof document === "undefined" ? import_aleo_wallet_adapter_base.WalletReadyState.Unsupported : import_aleo_wallet_adapter_base.WalletReadyState.NotDetected;
  constructor({ appName = "sample", isMobile = false, mobileWebviewUrl } = {}) {
    super();
    this._connecting = false;
    this._wallet = null;
    this._publicKey = null;
    this._decryptPermission = import_aleo_wallet_adapter_base.DecryptPermission.NoDecrypt;
    this.url = isMobile ? `https://app.leo.app/browser?url=${mobileWebviewUrl}` : "https://app.leo.app";
    if (this._readyState !== import_aleo_wallet_adapter_base.WalletReadyState.Unsupported) {
      (0, import_aleo_wallet_adapter_base.scopePollingDetectionStrategy)(() => {
        if (window?.leoWallet || window?.leo) {
          this._readyState = import_aleo_wallet_adapter_base.WalletReadyState.Installed;
          this.emit("readyStateChange", this._readyState);
          if (window?.leoWallet && window?.leoWallet.isAvailable) {
            window?.leoWallet.isAvailable();
          }
          return true;
        }
        return false;
      });
    }
  }
  get publicKey() {
    return this._publicKey;
  }
  get decryptPermission() {
    return this._decryptPermission;
  }
  get connecting() {
    return this._connecting;
  }
  get readyState() {
    return this._readyState;
  }
  set readyState(readyState) {
    this._readyState = readyState;
  }
  async decrypt(cipherText, tpk, programId, functionName, index) {
    try {
      const wallet = this._wallet;
      if (!wallet || !this.publicKey)
        throw new import_aleo_wallet_adapter_base.WalletNotConnectedError();
      switch (this._decryptPermission) {
        case import_aleo_wallet_adapter_base.DecryptPermission.NoDecrypt:
          throw new import_aleo_wallet_adapter_base.WalletDecryptionNotAllowedError();
        case import_aleo_wallet_adapter_base.DecryptPermission.UponRequest:
        case import_aleo_wallet_adapter_base.DecryptPermission.AutoDecrypt:
        case import_aleo_wallet_adapter_base.DecryptPermission.OnChainHistory: {
          try {
            const text = await wallet.decrypt(cipherText, tpk, programId, functionName, index);
            return text.text;
          } catch (error) {
            throw new import_aleo_wallet_adapter_base.WalletDecryptionError(error?.message, error);
          }
        }
        default:
          throw new import_aleo_wallet_adapter_base.WalletDecryptionError();
      }
    } catch (error) {
      this.emit("error", error);
      throw error;
    }
  }
  async requestRecords(program) {
    try {
      const wallet = this._wallet;
      if (!wallet || !this.publicKey)
        throw new import_aleo_wallet_adapter_base.WalletNotConnectedError();
      try {
        const result = await wallet.requestRecords(program);
        return result.records;
      } catch (error) {
        throw new import_aleo_wallet_adapter_base.WalletRecordsError(error?.message, error);
      }
    } catch (error) {
      this.emit("error", error);
      throw error;
    }
  }
  async requestTransaction(transaction) {
    try {
      const wallet = this._wallet;
      if (!wallet || !this.publicKey)
        throw new import_aleo_wallet_adapter_base.WalletNotConnectedError();
      try {
        const result = await wallet.requestTransaction(transaction);
        return result.transactionId;
      } catch (error) {
        throw new import_aleo_wallet_adapter_base.WalletTransactionError(error?.message, error);
      }
    } catch (error) {
      this.emit("error", error);
      throw error;
    }
  }
  async requestExecution(transaction) {
    try {
      const wallet = this._wallet;
      if (!wallet || !this.publicKey)
        throw new import_aleo_wallet_adapter_base.WalletNotConnectedError();
      try {
        const result = await wallet.requestExecution(transaction);
        return result.transactionId;
      } catch (error) {
        throw new import_aleo_wallet_adapter_base.WalletTransactionError(error?.message, error);
      }
    } catch (error) {
      this.emit("error", error);
      throw error;
    }
  }
  async requestBulkTransactions(transactions) {
    try {
      const wallet = this._wallet;
      if (!wallet || !this.publicKey)
        throw new import_aleo_wallet_adapter_base.WalletNotConnectedError();
      try {
        const result = await wallet.requestBulkTransactions(transactions);
        return result.transactionIds;
      } catch (error) {
        throw new import_aleo_wallet_adapter_base.WalletTransactionError(error?.message, error);
      }
    } catch (error) {
      this.emit("error", error);
      throw error;
    }
  }
  async requestDeploy(deployment) {
    try {
      const wallet = this._wallet;
      if (!wallet || !this.publicKey)
        throw new import_aleo_wallet_adapter_base.WalletNotConnectedError();
      try {
        const result = await wallet.requestDeploy(deployment);
        return result.transactionId;
      } catch (error) {
        throw new import_aleo_wallet_adapter_base.WalletTransactionError(error?.message, error);
      }
    } catch (error) {
      this.emit("error", error);
      throw error;
    }
  }
  async transactionStatus(transactionId) {
    try {
      const wallet = this._wallet;
      if (!wallet || !this.publicKey)
        throw new import_aleo_wallet_adapter_base.WalletNotConnectedError();
      try {
        const result = await wallet.transactionStatus(transactionId);
        return result.status;
      } catch (error) {
        throw new import_aleo_wallet_adapter_base.WalletTransactionError(error?.message, error);
      }
    } catch (error) {
      this.emit("error", error);
      throw error;
    }
  }
  async transitionViewKeys(transactionId) {
    try {
      const wallet = this._wallet;
      if (!wallet || !this.publicKey)
        throw new import_aleo_wallet_adapter_base.WalletNotConnectedError();
      try {
        const result = await wallet.transitionViewKeys(transactionId);
        return result.viewKeys;
      } catch (error) {
        throw new import_aleo_wallet_adapter_base.WalletTransactionError(error?.message, error);
      }
    } catch (error) {
      this.emit("error", error);
      throw error;
    }
  }
  async getExecution(transactionId) {
    try {
      const wallet = this._wallet;
      if (!wallet || !this.publicKey)
        throw new import_aleo_wallet_adapter_base.WalletNotConnectedError();
      try {
        const result = await wallet.getExecution(transactionId);
        return result.execution;
      } catch (error) {
        throw new import_aleo_wallet_adapter_base.WalletTransactionError(error?.message, error);
      }
    } catch (error) {
      this.emit("error", error);
      throw error;
    }
  }
  async requestRecordPlaintexts(program) {
    try {
      const wallet = this._wallet;
      if (!wallet || !this.publicKey)
        throw new import_aleo_wallet_adapter_base.WalletNotConnectedError();
      try {
        const result = await wallet.requestRecordPlaintexts(program);
        return result.records;
      } catch (error) {
        throw new import_aleo_wallet_adapter_base.WalletRecordsError(error?.message, error);
      }
    } catch (error) {
      this.emit("error", error);
      throw error;
    }
  }
  async requestTransactionHistory(program) {
    try {
      const wallet = this._wallet;
      if (!wallet || !this.publicKey)
        throw new import_aleo_wallet_adapter_base.WalletNotConnectedError();
      try {
        const result = await wallet.requestTransactionHistory(program);
        return result.transactions;
      } catch (error) {
        throw new import_aleo_wallet_adapter_base.WalletRecordsError(error?.message, error);
      }
    } catch (error) {
      this.emit("error", error);
      throw error;
    }
  }
  async connect(decryptPermission, network, programs) {
    try {
      if (this.connected || this.connecting)
        return;
      if (this._readyState !== import_aleo_wallet_adapter_base.WalletReadyState.Installed)
        throw new import_aleo_wallet_adapter_base.WalletNotReadyError();
      this._connecting = true;
      const wallet = window.leoWallet || window.leo;
      const isAvailable = wallet.isAvailable ? await wallet.isAvailable() : true;
      if (!isAvailable)
        throw new import_aleo_wallet_adapter_base.WalletConnectionError("The wallet is not available");
      try {
        await wallet.connect(decryptPermission, network, programs);
        if (!wallet?.publicKey) {
          throw new import_aleo_wallet_adapter_base.WalletConnectionError();
        }
        this._publicKey = wallet.publicKey;
      } catch (error) {
        throw new import_aleo_wallet_adapter_base.WalletConnectionError(error?.message, error);
      }
      this._wallet = wallet;
      this._decryptPermission = decryptPermission;
      this.emit("connect", this._publicKey);
    } catch (error) {
      this.emit("error", error);
      throw error;
    } finally {
      this._connecting = false;
    }
  }
  async disconnect() {
    const wallet = this._wallet;
    if (wallet) {
      this._wallet = null;
      this._publicKey = null;
      try {
        await wallet.disconnect();
      } catch (error) {
        this.emit("error", new import_aleo_wallet_adapter_base.WalletDisconnectionError(error?.message, error));
      }
    }
    this.emit("disconnect");
  }
  async signMessage(message) {
    try {
      const wallet = this._wallet;
      if (!wallet || !this.publicKey)
        throw new import_aleo_wallet_adapter_base.WalletNotConnectedError();
      try {
        const signature = await wallet.signMessage(message);
        return signature.signature;
      } catch (error) {
        throw new import_aleo_wallet_adapter_base.WalletSignTransactionError(error?.message, error);
      }
    } catch (error) {
      this.emit("error", error);
      throw error;
    }
  }
};
export {
  LeoWalletAdapter,
  LeoWalletName
};
//# sourceMappingURL=@demox-labs_aleo-wallet-adapter-leo.js.map
